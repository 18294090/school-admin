<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"> 
  <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
  <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>

<title>在线测评系统</title>
</head>
<body>
  
<div class="container">
  <div class="row clearfix">
    <div class="col-md-12 column bg-primary page-header" style="text-align: center;">
      <h1 class="display-1">在线测评系统（测试版）</h1>
    </div>
  </div>
  <div class="row clearfix">
    <div class="col-md-4 column">
    </div>
    <section class="login-clean">
    <div class="col-md-4 column ">
      <div class="panel panel-warning">
        <div class="panel-heading">
          <h3 class="panel-title" style="text-align: center;">
            请选择登陆类型
          </h3>
        </div>
        <div class="panel-body">
          <div class="panel-group" id="panel-420756">
        <div class="panel panel-default">
          <div class="panel-heading">
             <a class="panel-title" data-toggle="collapse" data-parent="#panel-420756" href="#panel-element-916676">普通登陆</a>
          </div>
          <div id="panel-element-916676" class="panel-collapse collapse ">
            <div class="panel-body">
               {% from 'bootstrap/form.html' import render_form%}
               {{render_form(form1)}}
          </div>
          </div>
        </div>
        <div class="panel panel-default">
          <div class="panel-heading">
             <a class="panel-title" data-toggle="collapse" data-parent="#panel-420756" href="#panel-element-270545">上课登陆</a>
          </div>
          <div id="panel-element-270545" class="panel-collapse collapse">
            <div class="panel-body">
              {% from 'bootstrap/form.html' import render_field %}
              <form method="POST">
               {{ form.csrf_token }}
               {{render_field(form.class_name,onchange="Select('class_name','#stuname','/select/')")}}
               {{render_field(form.stuname)}}
               {{render_field(form.password)}}
               {{render_field(form.submit)}}
             </form>
<script type="text/javascript">
  function Select(choose,id,register_url){
    var data;
    var select = document.getElementById(choose);
    var csrftoken = "{{ csrf_token() }}";
    $(id).empty();
    for (i=0;i<select.length;i++){
        if (select[i].selected){
            class_Name = select[i].text;
            data = {
                "class_name":class_Name
            };
            $.ajax({
                url:register_url,
                headers: {"X-CSRFToken": csrftoken },
                type:"POST",
                data:JSON.stringify(data),
                contentType:"application/json; charset=UTF-8",
                success:function (data) {
                    if (data){
                        for (i=0;i<data.length;i++){
                            $("<option value='"+data[i][0]+"'>" +data[i][1] + "</option>").appendTo(id);     
                        }
                    }
                    else{
                        alert('error');
                    }
                }
            });
        }
    }
}        
</script>
            </div>
          </div>
        </div>
      </div>
        </div>
        <div class="panel-footer">
          <a href="#">登陆遇到问题请联系管理员</a>
        </div>
      </div>
     
    </div>
    </section>
    <div class="col-md-4 column">
    </div>
  </div>
</div>
</body>

</html>